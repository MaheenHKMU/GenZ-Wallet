<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Work Calendar | GenZ Wallet</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      background-color: #0a0f1f;
      color: #fff;
      display: flex;
      transition: background-color 0.3s ease;
    }

    /* ---------- BRIGHT THEME ---------- */
    .bright-theme body {
      background: radial-gradient(1200px 400px at 10% 10%, rgba(251, 191, 36, 0.15), transparent),
                  linear-gradient(180deg, #fffbeb 0%, #fef3c7 100%);
      color: #1f2937;
    }

    .bright-theme .sidebar {
      background: linear-gradient(180deg, #fef3c7 0%, #ffedd5 100%);
      border-right: 1px solid rgba(0,0,0,0.08);
    }

    .bright-theme .brand h1 {
      color: var(--gold);
      text-shadow: 0 0 8px rgba(217, 119, 6, 0.3);
    }

    .bright-theme nav.menu a {
      color: var(--muted);
    }

    .bright-theme nav.menu a:hover {
      background: rgba(217, 119, 6, 0.1);
      color: var(--gold);
      transform: translateX(4px);
    }

    .bright-theme nav.menu a.active {
      background: linear-gradient(90deg, rgba(217, 119, 6, 0.2), rgba(217, 119, 6, 0.05));
      color: var(--gold);
      border-left: 4px solid var(--gold);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .bright-theme .main-content {
      background: radial-gradient(1200px 400px at 10% 10%, rgba(251, 191, 36, 0.15), transparent),
                  linear-gradient(180deg, #fffbeb 0%, #fef3c7 100%);
    }

    .bright-theme .header {
      background: linear-gradient(145deg, rgba(255,255,255,0.8), rgba(255,255,255,0.6));
      border: 1px solid rgba(0,0,0,0.08);
      box-shadow: 0 8px 24px rgba(0,0,0,0.1);
    }

    .bright-theme .stat-box {
      background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.7));
      border: 1px solid rgba(0,0,0,0.08);
      box-shadow: 0 8px 24px rgba(0,0,0,0.1);
    }

    .bright-theme .calendar {
      background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.7));
      border: 1px solid rgba(0,0,0,0.08);
      box-shadow: 0 8px 24px rgba(0,0,0,0.1);
    }

    .bright-theme .day {
      background: #fef3c7;
      color: #1f2937;
      border: 1px solid rgba(0,0,0,0.05);
    }

    .bright-theme .day.active {
      background: linear-gradient(135deg, #d97706, #b45309);
      color: #fff;
      border: 1px solid rgba(0,0,0,0.1);
    }

    .bright-theme .modal-content {
      background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.7));
      border: 1px solid rgba(0,0,0,0.08);
      box-shadow: 0 8px 24px rgba(0,0,0,0.1);
    }

    .bright-theme .modal-content input {
      background: rgba(255, 255, 255, 0.8);
      border: 1px solid rgba(0,0,0,0.15);
      color: #1f2937;
    }

    .bright-theme .modal-content input:focus {
      border-color: var(--gold);
      box-shadow: 0 0 0 3px rgba(217, 119, 6, 0.2);
    }

    .bright-theme .modal-content button {
      background: linear-gradient(135deg, #d97706, #b45309);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .bright-theme .add-btn {
      background: linear-gradient(135deg, #d97706, #b45309);
      color: white;
      border: none;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .bright-theme .add-btn:hover {
      background: linear-gradient(135deg, #b45309, #92400e);
      box-shadow: 0 6px 16px rgba(0,0,0,0.15);
    }

    /* ---------- MAIN CONTENT ---------- */
    .main-content {
      flex: 1;
      margin-left: 280px;
      padding: 30px;
      transition: all 0.3s ease;
    }

    /* Header */
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #121a2c;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 0 20px rgba(0,0,0,0.4);
      margin-bottom: 25px;
      transition: all 0.3s ease;
    }

    .header h1 {
      font-size: 1.8rem;
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 0;
      font-weight: 700;
    }

    .add-btn {
      background: linear-gradient(135deg, #6a2bff, #b33cff);
      color: white;
      border: none;
      border-radius: 8px;
      padding: 12px 20px;
      font-weight: 600;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .add-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(0,0,0,0.4);
    }

    .add-btn:active {
      transform: translateY(0);
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }

    /* Stats */
    .stats {
      display: flex;
      gap: 20px;
      margin-bottom: 25px;
      flex-wrap: wrap;
    }

    .stat-box {
      flex: 1;
      min-width: 200px;
      background: #121a2c;
      border-radius: 12px;
      padding: 20px;
      text-align: left;
      box-shadow: 0 0 15px rgba(0,0,0,0.3);
      transition: all 0.3s ease;
      border: 1px solid rgba(255,255,255,0.05);
    }

    .stat-box:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0,0,0,0.4);
    }

    .stat-box h4 {
      font-weight: 500;
      color: #9ca4c4;
      margin-bottom: 10px;
      font-size: 14px;
    }

    .stat-box p {
      font-size: 1.8rem;
      font-weight: 700;
      margin: 0;
    }

    /* Calendar */
    .calendar {
      background: #121a2c;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 0 20px rgba(0,0,0,0.4);
      transition: all 0.3s ease;
      border: 1px solid rgba(255,255,255,0.05);
    }

    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .month-title {
      font-size: 1.5rem;
      font-weight: 700;
      margin: 0;
    }

    .calendar-nav {
      display: flex;
      gap: 10px;
    }

    .nav-btn {
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      color: #c3c8e8;
      border-radius: 8px;
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .nav-btn:hover {
      background: rgba(255,255,255,0.1);
      color: white;
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 10px;
    }

    .day-header {
      text-align: center;
      font-weight: 600;
      color: #9ca4c4;
      padding: 10px;
      font-size: 14px;
    }

    .day {
      background: #1a2236;
      border-radius: 8px;
      padding: 10px;
      height: 100px;
      text-align: right;
      font-size: 0.9rem;
      color: #c3c8e8;
      position: relative;
      transition: all 0.2s ease;
      border: 1px solid rgba(255,255,255,0.03);
      cursor: pointer;
    }

    .day:hover {
      background: #1f2840;
      transform: translateY(-2px);
    }

    .day.active {
      background: linear-gradient(135deg, #6a2bff, #b33cff);
      color: #fff;
      border: 1px solid rgba(255,255,255,0.1);
    }

    .day .shift {
      position: absolute;
      left: 6px;
      bottom: 6px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 6px;
      font-size: 0.7rem;
      padding: 3px 6px;
      max-width: calc(100% - 12px);
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .day .shift-hours {
      font-size: 0.7rem;
      opacity: 0.8;
      position: absolute;
      right: 6px;
      bottom: 6px;
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      justify-content: center;
      align-items: center;
      z-index: 1000;
      backdrop-filter: blur(5px);
    }

    .modal-content {
      background: #121a2c;
      border-radius: 12px;
      padding: 25px;
      width: 90%;
      max-width: 400px;
      box-shadow: 0 0 30px rgba(0,0,0,0.5);
      border: 1px solid rgba(255,255,255,0.05);
      animation: modalAppear 0.3s ease;
    }

    @keyframes modalAppear {
      from { transform: translateY(-20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .modal-content h2 {
      margin-top: 0;
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 20px;
      color: #e6eef8;
    }

    .modal-content input, 
    .modal-content select {
      width: 100%;
      padding: 12px;
      border-radius: 8px;
      border: 1px solid rgba(255,255,255,0.1);
      margin-bottom: 15px;
      background: #1a2236;
      color: #fff;
      font-size: 15px;
      transition: all 0.2s ease;
    }

    .modal-content input:focus,
    .modal-content select:focus {
      outline: none;
      border-color: #6a2bff;
      box-shadow: 0 0 0 3px rgba(106, 43, 255, 0.3);
    }

    .modal-content button {
      width: 100%;
      background: linear-gradient(135deg, #6a2bff, #b33cff);
      border: none;
      color: #fff;
      border-radius: 8px;
      padding: 12px;
      font-weight: 600;
      font-size: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }

    .modal-content button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(0,0,0,0.4);
    }

    .close-btn {
      position: absolute;
      top: 15px;
      right: 15px;
      background: none;
      border: none;
      color: #9ca4c4;
      font-size: 20px;
      cursor: pointer;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.2s ease;
    }

    .close-btn:hover {
      background: rgba(255,255,255,0.1);
      color: white;
    }

    @media (max-width: 768px) {
      body {
        flex-direction: column;
      }
      
      .main-content {
        margin-left: 0;
        padding: 20px 15px;
      }

      .calendar-grid {
        grid-template-columns: repeat(4, 1fr);
      }
      
      .stats {
        flex-direction: column;
      }
      
      .stat-box {
        min-width: 100%;
      }
    }

    @media (max-width: 480px) {
      .calendar-grid {
        grid-template-columns: repeat(3, 1fr);
      }
      
      .header {
        flex-direction: column;
        gap: 15px;
        text-align: center;
      }
    }
  </style>
</head>
<body>
  <!-- SIDEBAR -->
  <aside class="sidebar" aria-label="Main navigation">
    <div class="brand">
      <div style="display:flex;gap:10px;align-items:center">
        <div class="logo">$</div>
        <div>
          <h1>GenZ Wallet</h1>
          <small>Elite Finance</small>
        </div>
      </div>
    </div>

    <nav class="menu" role="navigation">
      <a href="Gen_wallet_dashboard.html"><span class="nav-icon">üè†</span><span class="nav-label">Dashboard</span></a>
      <a href="Gen_wallet_calendar.html" class="active"><span class="nav-icon">üìÖ</span><span class="nav-label">Calendar</span></a>
      <a href="Gen_wallet_Transaction.html"><span class="nav-icon">üíµ</span><span class="nav-label">Transactions</span></a>
      <a href="Gen_wallet_goal.html"><span class="nav-icon">üéØ</span><span class="nav-label">Goals</span></a>
      <a href="Gen_wallet_cap.html"><span class="nav-icon">üõ°Ô∏è</span><span class="nav-label">Spending Caps</span></a>
      <a href="Gen_wallet_Invest.html"><span class="nav-icon">üìà</span><span class="nav-label">Invest</span></a>
      <a href="Gen_wallet_Import.html"><span class="nav-icon">‚¨ÜÔ∏è</span><span class="nav-label">Import</span></a>
      <a href="Gen_wallet_AI.html"><span class="nav-icon">ü§ñ</span><span class="nav-label">AI Assistant</span></a>
      <a href="Gen_wallet_Learn.html"><span class="nav-icon">üìò</span><span class="nav-label">Learn</span></a>
      <a href="Gen_wallet_learderborad.html"><span class="nav-icon">üèÜ</span><span class="nav-label">Leaderboard</span></a>
    </nav>
    
    <button id="themeToggle" class="theme-toggle">
      <span class="theme-icon">‚òÄÔ∏è</span>
      <span class="theme-text">Light Theme</span>
    </button>
  </aside>

  <!-- Main Content -->
  <div class="main-content">
    <div class="header">
      <h1>Work Calendar üìÖ</h1>
      <button class="add-btn" id="addShiftBtn">
        <span>+</span>
        <span>Add Shift</span>
      </button>
    </div>

    <div class="stats">
      <div class="stat-box">
        <h4>Total Hours</h4>
        <p id="totalHours">0h</p>
      </div>
      <div class="stat-box">
        <h4>Earnings</h4>
        <p id="totalEarnings">$0</p>
      </div>
      <div class="stat-box">
        <h4>Shifts</h4>
        <p id="totalShifts">0</p>
      </div>
      <div class="stat-box">
        <h4>Avg. Rate</h4>
        <p id="avgRate">$0/h</p>
      </div>
    </div>

    <div class="calendar">
      <div class="calendar-header">
        <div class="month-title" id="monthYear"></div>
        <div class="calendar-nav">
          <button class="nav-btn" id="prevMonth">‚Äπ</button>
          <button class="nav-btn" id="nextMonth">‚Ä∫</button>
        </div>
      </div>
      <div class="calendar-grid" id="calendarGrid"></div>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal" id="shiftModal">
    <div class="modal-content">
      <button class="close-btn" id="closeModal">&times;</button>
      <h2 id="modalTitle">Add Shift</h2>
      <input type="date" id="shiftDate" required />
      <input type="text" id="shiftLabel" placeholder="Shift Label (e.g. MU)" />
      <input type="number" id="shiftHours" placeholder="Hours Worked" step="0.25" min="0" />
      <input type="number" id="hourlyRate" placeholder="Hourly Rate ($)" step="0.01" min="0" />
      <button id="saveShift">Save Shift</button>
    </div>
  </div>

  <script>
    // Theme toggle functionality with global sync
    const themeToggle = document.getElementById('themeToggle');
    const themeIcon = document.querySelector('.theme-icon');
    const themeText = document.querySelector('.theme-text');
    
    // Load saved theme preference
    function loadThemePreference() {
      const savedTheme = localStorage.getItem('genzWalletTheme');
      if (savedTheme === 'bright') {
        document.body.classList.add('bright-theme');
        themeIcon.textContent = 'üåô';
        themeText.textContent = 'Dark Theme';
      } else {
        document.body.classList.remove('bright-theme');
        themeIcon.textContent = '‚òÄÔ∏è';
        themeText.textContent = 'Light Theme';
      }
    }
    
    // Save theme preference
    function saveThemePreference(theme) {
      localStorage.setItem('genzWalletTheme', theme);
    }
    
    // Toggle theme
    themeToggle.addEventListener('click', function() {
      document.body.classList.toggle('bright-theme');
      
      if (document.body.classList.contains('bright-theme')) {
        themeIcon.textContent = 'üåô';
        themeText.textContent = 'Dark Theme';
        saveThemePreference('bright');
      } else {
        themeIcon.textContent = '‚òÄÔ∏è';
        themeText.textContent = 'Light Theme';
        saveThemePreference('dark');
      }
      
      // Notify other tabs/windows of theme change
      localStorage.setItem('themeChange', Date.now());
    });
    
    // Listen for theme changes from other tabs
    window.addEventListener('storage', function(e) {
      if (e.key === 'themeChange') {
        loadThemePreference();
      }
    });
    
    // Load theme on page load
    loadThemePreference();

    // Calendar functionality
    const calendarGrid = document.getElementById("calendarGrid");
    const monthYear = document.getElementById("monthYear");
    const shiftModal = document.getElementById("shiftModal");
    const addShiftBtn = document.getElementById("addShiftBtn");
    const saveShiftBtn = document.getElementById("saveShift");
    const closeModal = document.getElementById("closeModal");
    const prevMonthBtn = document.getElementById("prevMonth");
    const nextMonthBtn = document.getElementById("nextMonth");

    const totalHoursEl = document.getElementById("totalHours");
    const totalEarningsEl = document.getElementById("totalEarnings");
    const totalShiftsEl = document.getElementById("totalShifts");
    const avgRateEl = document.getElementById("avgRate");

    let shifts = JSON.parse(localStorage.getItem("shifts")) || [];
    let currentDate = new Date();
    let currentYear = currentDate.getFullYear();
    let currentMonth = currentDate.getMonth();

    function renderCalendar() {
      // Update month/year display
      monthYear.textContent = `${currentDate.toLocaleString("default", { month: "long" })} ${currentYear}`;
      
      // Clear calendar grid
      calendarGrid.innerHTML = "";
      
      // Add day headers
      const daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
      daysOfWeek.forEach(day => {
        const dayHeader = document.createElement("div");
        dayHeader.classList.add("day-header");
        dayHeader.textContent = day;
        calendarGrid.appendChild(dayHeader);
      });
      
      // Get first day of month and last day of month
      const firstDay = new Date(currentYear, currentMonth, 1);
      const lastDay = new Date(currentYear, currentMonth + 1, 0);
      const daysInMonth = lastDay.getDate();
      
      // Get day of week for first day (0 = Sunday, 1 = Monday, etc.)
      const firstDayOfWeek = firstDay.getDay();
      
      // Add empty cells for days before the first day of the month
      for (let i = 0; i < firstDayOfWeek; i++) {
        const emptyDay = document.createElement("div");
        emptyDay.classList.add("day");
        emptyDay.style.visibility = "hidden";
        calendarGrid.appendChild(emptyDay);
      }
      
      // Add cells for each day of the month
      for (let i = 1; i <= daysInMonth; i++) {
        const dayDiv = document.createElement("div");
        dayDiv.classList.add("day");
        dayDiv.textContent = i;
        
        // Add click event to open modal for this date
        dayDiv.addEventListener("click", () => {
          const selectedDate = `${currentYear}-${String(currentMonth + 1).padStart(2, "0")}-${String(i).padStart(2, "0")}`;
          openShiftModal(selectedDate);
        });
        
        const dayDate = `${currentYear}-${String(currentMonth + 1).padStart(2, "0")}-${String(i).padStart(2, "0")}`;
        const dayShifts = shifts.filter(s => s.date === dayDate);
        
        if (dayShifts.length > 0) {
          dayDiv.classList.add("active");
          
          // Show shift info if there's only one shift
          if (dayShifts.length === 1) {
            const shift = dayShifts[0];
            const shiftLabel = document.createElement("div");
            shiftLabel.classList.add("shift");
            shiftLabel.textContent = shift.label || "Work";
            
            const shiftHours = document.createElement("div");
            shiftHours.classList.add("shift-hours");
            shiftHours.textContent = `${shift.hours}h`;
            
            dayDiv.appendChild(shiftLabel);
            dayDiv.appendChild(shiftHours);
          } 
          // Show multiple shifts indicator if there are multiple shifts
          else {
            const shiftLabel = document.createElement("div");
            shiftLabel.classList.add("shift");
            shiftLabel.textContent = `${dayShifts.length} shifts`;
            
            const totalHours = dayShifts.reduce((sum, s) => sum + parseFloat(s.hours), 0);
            const shiftHours = document.createElement("div");
            shiftHours.classList.add("shift-hours");
            shiftHours.textContent = `${totalHours}h`;
            
            dayDiv.appendChild(shiftLabel);
            dayDiv.appendChild(shiftHours);
          }
        }
        
        calendarGrid.appendChild(dayDiv);
      }
      
      updateStats();
    }
    
    function updateStats() {
      const totalHours = shifts.reduce((acc, s) => acc + parseFloat(s.hours), 0);
      const totalEarnings = shifts.reduce((acc, s) => acc + (parseFloat(s.hours) * parseFloat(s.rate)), 0);
      const avgRate = totalHours > 0 ? (totalEarnings / totalHours).toFixed(2) : 0;
      
      totalHoursEl.textContent = `${totalHours}h`;
      totalEarningsEl.textContent = `$${totalEarnings.toFixed(2)}`;
      totalShiftsEl.textContent = shifts.length;
      avgRateEl.textContent = `$${avgRate}/h`;
    }
    
    function openShiftModal(date, shift = null) {
      document.getElementById("shiftDate").value = date;
      document.getElementById("shiftLabel").value = shift ? shift.label : "";
      document.getElementById("shiftHours").value = shift ? shift.hours : "";
      document.getElementById("hourlyRate").value = shift ? shift.rate : "";
      
      document.getElementById("modalTitle").textContent = shift ? "Edit Shift" : "Add Shift";
      shiftModal.style.display = "flex";
    }
    
    function closeShiftModal() {
      shiftModal.style.display = "none";
      document.getElementById("shiftDate").value = "";
      document.getElementById("shiftLabel").value = "";
      document.getElementById("shiftHours").value = "";
      document.getElementById("hourlyRate").value = "";
    }
    
    addShiftBtn.addEventListener("click", () => {
      const today = new Date();
      const todayStr = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, "0")}-${String(today.getDate()).padStart(2, "0")}`;
      openShiftModal(todayStr);
    });
    
    saveShiftBtn.addEventListener("click", () => {
      const date = document.getElementById("shiftDate").value;
      const label = document.getElementById("shiftLabel").value || "Work";
      const hours = parseFloat(document.getElementById("shiftHours").value);
      const rate = parseFloat(document.getElementById("hourlyRate").value);
      
      if (date && hours && rate) {
        shifts.push({ date, label, hours, rate });
        localStorage.setItem("shifts", JSON.stringify(shifts));
        closeShiftModal();
        renderCalendar();
      } else {
        alert("Please fill in all fields with valid values");
      }
    });
    
    closeModal.addEventListener("click", closeShiftModal);
    
    prevMonthBtn.addEventListener("click", () => {
      currentDate.setMonth(currentDate.getMonth() - 1);
      currentYear = currentDate.getFullYear();
      currentMonth = currentDate.getMonth();
      renderCalendar();
    });
    
    nextMonthBtn.addEventListener("click", () => {
      currentDate.setMonth(currentDate.getMonth() + 1);
      currentYear = currentDate.getFullYear();
      currentMonth = currentDate.getMonth();
      renderCalendar();
    });
    
    window.addEventListener("click", e => {
      if (e.target === shiftModal) {
        closeShiftModal();
      }
    });
    
    // Initialize calendar
    renderCalendar();
    
    // Sidebar toggle functionality
    const brand = document.querySelector('.brand');
    const sidebar = document.querySelector('.sidebar');
    
    brand.addEventListener('click', () => {
      sidebar.classList.toggle('collapsed');
    });
  </script>
</body>
</html>